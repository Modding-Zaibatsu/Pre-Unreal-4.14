INTSourceChangelist:3102983
Availability:Docs
Title:リプレイ システム
Crumbs: %ROOT%, Engine
Description:ゲームプレイを記録し再生するためのリプレイ システムの概要を説明します。
Version:4.12
parent:Engine
order:17
topic-image:replay_topic.png


[REGION:banner]
![](replay_banner.png)(convert:false)
[/REGION]

## リプレイ システムの概要
UE4 には、後で見るためにゲームプレイを記録することができるリプレイ システムがあります。簡単に説明すると、リプレイ システムはビルトインのレプリケーション システムからのデータを読み出すことで機能します。ネットワーク環境でライブのゲームプレイが機能するのと似ています。マルチプレイヤー ゲームのようにデータをレプリケートするようにセットアップされたプロジェクトでは、実際にはマルチプレイヤー モードがなくても、さらに修正を加えなくてもリプレイ システムと互換性があります。これは、レプリケートされたデータを Replay Streamer に渡すことで機能します。Replay Streamer ではデータのフィルタリングと保存を処理します。リプレイ システムが保存したリプレイを表示しようとすると、ライブ プレイ中に利用可能であったすべてのレプリケートされた情報が含まれます。さらに、リプレイのみに関連するとして指定された特殊なデータ欄も含み、このデータからゲームのイベントを再構築することができます。

## リプレイ システムの機能
リプレイ システムの基本機能としては、デモの記録の開始や終了、または過去に記録されたデモの再生があります。再生モード中は、リプレイ システムは一時停止、再生速度を変更し、特定の時間のポイントにジャンプするコマンドをサポートします。システムの高度な使用方法には、リプレイにテキスト タグ (通常はメタ タグまたはゲームに参加するプレイヤー名) を追加、テキスト タグやバージョン情報に基づき既存のリプレイにクエリーするなどがあります。リプレイ システムは C++ コードから使用できます。主に、`UGameInstance` クラスおよび `UWorld` クラス経由で、またはコンソール コマンドやコマンドライン引数を使って使用できます。C++/Blueprint API を統合したものを構築中であり、エンジンの将来のバージョンでリリース予定です。

## リプレイ データの形式
データに関してリプレイには、3 種類のゲーム ステート情報といくつかのテキスト データがあります。最初に、ゲーム ワールドの開始ステートを表すベースライン データがあります。ワールドに対する (ベースラインからの) 正味の変化のスナップショットとしての役割を果たすチェックポイントが、定期的なユーザー定義の間隔で表示されます。チェックポイントとチェックポイントの間は、ワールドの個々のオブジェクトに対する漸進的変化で満たされます。ワールドを開始ステートに初期化することでゲームの任意の瞬間を迅速かつ正確に再構築することができます。選択した時間よりも前の最終チェックポイントで表される変化を加えて、次にチェックポイント後から望ましい時間のポイントまでの漸進的変化を適用します。リプレイに含まれるテキスト データには、player-facing リストを作るときに使うことができる表示名、ユーザー定義のテキスト タグ (HTTP Streamer のみ) が含まれます。これはゲームのリストを検索したり、フィルタリングするときに使用することができます。

## ストリーマー
リプレイ システムのストリーマーは、リプレイを作成するために必要な記録の実際の抽出と記録を行います。リプレイ データがどのように見えるようにするかに応じて、異なるストリーマーを使用することができます。様々な用途に適した 3 種類のストリーマーがあります。デフォルトの NULL Streamer はホスト マシンからイベントを直接ディスクに記録します。シングル プレイヤー ゲームや、リプレイをホスト プレイヤー自身のマシンにローカルに保持するゲームに最適です。Memory Streamer はクライアント マシンで実行し、メモリにデータを保存します。スポーツ作品のビデオ判定機能やシューティング ゲームのキルカメラに最適です。最後に HTTP Streamer はリプレイ データを LAN またはインターネット上の 2 台めのマシンに送ります。専用サーバーのゲームやプレイヤーに反応し続けながら大勢の観戦者に向けてストリーミングする必要があるゲームに適しています。
