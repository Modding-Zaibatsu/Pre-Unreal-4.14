INTSourceChangelist:2669445
Availability:Public
Title:アニメーション シーケンスの編集
Crumbs: %ROOT%, Engine, Engine/Animation, Engine/Animation/Sequences
Description:ペルソナを使用して、アニメーション シーケンスの編集とアニメーション通知イベントを追加するためのガイド
version:4.9

[REGION:banner]
![](persona_sequence_banner.png)(convert:false)
[/REGION]

[TOC(start:2)]

[EXCERPT:overview]
**アニメーション シーケンスエディタ** には個々の **アニメーション シーケンス** アセットをプレビューし、編集する機能があります。圧縮スキームを含むアニメーション シーケンスのプロパティを設定することができます。また Notify (通知) とも呼ばれるアニメーション通知イベントを追加して、カメラエフェクト、パーティクル エフェクト、サウンドなどをアニメーションに基づいてトリガーすることができます。
[/EXCERPT:overview]

## インターフェース

**アニメーションシーケンス エディタ** は以下のように構成されています。

![](AnimationSequenceEditor.png)

1. **名前** - 現在編集中のアニメーション シーケンスの名前を表示します。
1. **通知** - 通知を作成 / 編集するための編集可能なトラックのリストトラックの作成と削除、および通知の作成と通知を用いた作業については、以下の指示を参照してください。
1. **カーブ** - アニメーション カーブを追加し、編集するためのグラフのようなエリア。
1. **トラック** - アニメーション レイヤーを編集するために使うフィールド。詳しい情報は、[](Engine/Animation/AnimHowTo/LayerEditing) のページをご覧ください。
1. **タイムライン** - **[Persona (ペルソナ)]** の **[ビューポート]** パネルでプレビューの再生に関する情報およびプ制御を提供します。


##通知

**アニメーション通知** は、何かを起こさせる原因となる特定のアニメーションに沿ったイベントです。例えば、キャラクターの足がフロアについた瞬間に足音を再生するためにタイムラインに沿った通知を作成することができます。パーティクル、カメラ、そしてサウンドエフェクトにも通知を使用することができます。独自のイベントをトリガーするカスタム仕様の通知も作成できます。

アニメーション通知に関する詳細は、[](Engine/Animation/Sequences\Notifies) のページを参照してください。


## 通知トラック

通知は **アニメーション シーケンス** 内の **トラック** に格納されています。トラックは本質的にいくつもの通知を保持出来るコンテナで、アニメーション シーケンスはいくつものトラックを保持することができます。複数トラックを使用すると、通知の管理や可視化が簡単にできます。特に、アニメーション シーケンスが多数または異なるタイプのいくつかの通知を必要とする際に有効です。

すべてのアニメーション シーケンスには、デフォルトで 1 つのトラックがあります。シークエンスにはトラックを追加することが可能で、既存トラックはトラックの右側にあるボタンで削除できます。

新しいトラックを追加するには、**トラックリスト** で、既存トラックの横にある ![](button_track_add.png) ボタンをクリックします。

![](AddTrack.png)

新しいトラックが、リスト内の既存トラックの上に追加されます。

![](TrackAdded.png)

既存トラックを削除するには、**トラックリスト** で、削除したい既存トラックの横にある ![](button_track_remove.png) ボタンをクリックします。

![](RemoveTrack.png)

リストからトラックが削除されます。

![](TrackRemoved.png)

## 通知を扱う作業

通知は、トラックに追加、トラック内を移動、または **トラックリスト** 内の異なるトラック間で移動させることができます。これにより、通知位置の調整や迅速な論理的アレンジが非常に簡単となります。

### 通知の作成

既存タイプまたはカスタム仕様の通知をコンテキスト メニューから追加することができます。トラックを **右クリック** するとコンテキスト メニューが表示されます。利用可能な通知の全タイプは、 **[Add Notify...]** のコンテキスト メニューにリスト表示されます。トラックに追加する通知のタイプを選択します。

![](AddNotify.png)

新しい通知が、ユーザーが **右クリック** したトラックの位置に追加されます。

![](NotifyAdded.png)

### 通知の位置づけ

トラック内の通知の位置は、通知に対応するイベントがトリガーされるタイミングを決定するため非常に重要です。通知の移動は、通知の上をクリックして **左マウスボタン** を押しながらマウスをドラッグするだけで簡単に行うことができます。

![](MovingNotify.png)

**左マウスボタン** を放して、移動させたい場所に通知をドロップします。

![](NotifyMoved.png)

### トラックの切り替え

トラック間での通知の移動はとても簡単です。実際の操作は、上記で説明した通知の位置づけのプロセスと基本的に同じです。唯一違う点は、通知をリリースするトラックが、始まりのトラックではなく別のトラックである点です。

![](TrackSwitch1.png)

![](TrackSwitch2.png)

![](TrackSwitch3.png) 


### 通知のコピー/貼り付け

通知を **右クリック** して、アニメーションに沿った別の場所へ貼り付けるためにクリップボードへコピーできます。もしくは、まったく異なるアニメーション シーケンスへ貼り付けることも出来ます。 

![](CopyAnimNotify.png)

通知トラック内を **右クリック** しても貼り付けができます。貼り付け方法は、以下の 2 つのオプションからどちらかを選択します。

![](PasteOptions.png)

* **Paste** - タイムスライダーの現在位置へ通知を貼り付けます。
* **Paste at Original Time** - 通知がコピーされた時間と同じ時間に通知を貼り付けます。 

複数の通知に対してアクションを行うこともできます。これは、通知上で **Shift + 左クリック** して、選択に加えるか、または **Ctrl + 左クリック** して、選択した通知を切り替えます。 

選択した通知をドラッグできます。スナッピングはそのまま保ちながら、通知はそのまま通知パネル内に留まります。 

![](MultipleNotifies.png)

複数通知がコピーされたら、タイムラインで **右クリック** するとコンテキスト メニューが表示されます。追加の貼り付けオプションがあります。 

![](CopyPasteMenu.png)

**Paste Multiple Relative:** アニメーションの長さに関係なく通知と通知との間は相対間隔を保持しながらマウス カーソル位置に貼り付けます。つまり、通知グループはアニメーションが短くなったり、長くなったりしても貼り付け前と同じような間隔であるように見えます。 

**Paste Multiple Absolute:** 絶対間隔を保持しながらマウス カーソル位置に貼り付けます。通知は正確な時間間隔を保持します。つまり、全く同じ間隔で発行しますが、通知グループはより短いまたはより長いアニメーションにスケーリングされません。 

**Paste at Original Time:** コピー時と全く同じ場所にすべてのノードを入れます。 

追記：  
* 通知がトラックの右端から外れるような貼り付け操作はできますが、通知はそのトラックにクランプされます。 
* マウスカーソルでの貼り付けは、選択した通知の中で一番左上のポイントをノード配置のための参照ポイントとして使用します。 
* 通知パネルの下部より下を通るグループを貼り付けると、グループを収容するために必要な数だけのトラックが自動的に追加されます。 



## タイムライン

![](timeline.png)

 **タイムライン** の情報バーには以下の再生情報が表示されます。

| 情報 | 説明 |
| ---- | ----------- |
| **Animation** | 現在編集中のアニメーション シーケンスの名前です。 |
| **Percentage** | アニメーション全体に対する比率で表した現在の再生位置です。 |
| **Current Time** | 秒で表した現在の再生位置です。 |
| **Current Frame** | フレームで表した現在の再生位置です。 |

[INCLUDE:Engine/Animation/Persona/Viewport#PreviewControls]
