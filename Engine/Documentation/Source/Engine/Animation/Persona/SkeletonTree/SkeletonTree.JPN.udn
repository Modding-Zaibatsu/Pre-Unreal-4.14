INTSourceChangelist:3007768
Availability:Public
Title:ペルソナのスケルトン ツリー
Crumbs: %ROOT%, Engine, Engine/Animation, Engine/Animation/Persona
Description:ペルソナ (Persona) のアニメーション エディタのスケルトン ツリーのユーザーガイド
version:4.11
related:Engine/Content\Types\SkeletalMeshes\Sockets
related:Engine/Animation/AnimationRetargeting

[VAR:Topic]
[OBJECT:Topic]
	[PARAM:image]
		![%Engine/Animation/Persona/SkeletonTree:title%](Engine/Animation/animation_topic.png)
	[/PARAM]
	[PARAM:icon]
		![](%ROOT%/content_icon.png)(convert:false)
	[/PARAM]
	[PARAM:title]
		%Engine/Animation/Persona/SkeletonTree:title%
	[/PARAM]
	[PARAM:description]
		%Engine/Animation/Persona/SkeletonTree:description%
	[/PARAM]
	[PARAM:path]
		[RELATIVE:Engine/Animation/Persona/SkeletonTree]
	[/PARAM]
[/OBJECT]
[/VAR]

![](SkeletonTree.png)  

[EXCERPT:Overview]
**[スケルトン ツリー]** パネルには、現在のスケルタル メッシュのスケルタル階層が表示されます。階層内では、以下の操作を行うことが可能です。

* スケルタル階層で特定のボーンを選択および表示。
* プロップやその他のアイテムに対するボーン オフセットの適用ポイントとなる [ソケット](Engine/Content\Types\SkeletalMeshes\Sockets) の作成および編集。
* プレビュー アセットの作成。このアセットは一時的に適用されるアセットで、例えばキャラクター上で武器がどのように見えるかをプレビューする場合などに便利です。
* アニメーションのリターゲットの操作設定 (**[Show Advanced Options]** にチェックが入っている場合)。
[/EXCERPT:Overview]

## インターフェースの詳細

![](SkeletonTree_UIBreakdown.png)

1.  検索欄、ブレンド プロファイル、ボーンとソケット ボタン、詳細オプション
1. ボーン階層リスト
1. 平行移動リターゲット制御 (表示するには、スケルトン ツリーパネルの上部にある **[Show Advanced Options (詳細オプションを表示)]** を有効にします)


##検索欄、ボーン、ソケット ボタン

![](SearchLine.png)

**検索** 欄でスケルタル階層を素早く簡単に検索することが出来ます。ボーン、ソケット、プレビュー オブジェクトの名前の一部をタイプすると、リストが必要に応じてフィルタリングされます。

![](SeachFiltering.png)



###検索行、ボーン、ソケット ボタン

![](button_BoneAndSocketButtons.png)

**ボーン** と **ソケット** ボタンは様々なボーンとソケットのタイプの表示操作に使用されます。それぞれのボタンが開くメニューから、表示させたいボーンやソケットのタイプを選択することができます。

[REGION:raw]
![](BonesMenu.png)
[/REGION]

| オプション					| 説明														|
|---------------------------|-------------------------------------------------------------------|
|**Show All Bones**			| スケルトンで利用できる全てのボーンを表示します。						|
|**Show Mesh Bones**		| このスケルタル メッシュ限定のボーンを表示します。	|
|**Show Weighted Bones**	| 重み付けされた頂点をもつボーンのみ表示します。		|
|**Hide Bones**				| ボーンをすべて隠し、ソケットとプレビュー アセットのみを表示します。			|

[REGION:raw]
![](SocketsMenu.png)
[/REGION]


| オプション | 説明 |
|---|---|
|**Show Active Sockets**	| アクティブなソケットのみを表示します。ソケットをカスタマイズすると (**右クリック** して [Customize Socket] を選択)、ソケットはスケルトンからメッシュへコピーされます。そして、このスケルタルメッシュ専用の特別なソケットが作成され、同じスケルトンを使用する他のスケルタル メッシュはこのソケットを共有しません。この設定を行うと、メッシュ ソケットとも呼ばれるカスタマイズされた新しいソケットがアクティブになり、Skeleton アセットの一部として残っているオリジナルのソケットは非アクティブとなります。実際、これにより、カスタマイズされたメッシュ ソケットのオリジナルのソケットは全て非表示になります。 |
|**Show Mesh Sockets**		| カスタマイズされたソケットのうち、そのスケルタル メッシュ専用で、このソケットで Skeleton アセットを共有する他のスケルタル メッシュからは一切使用されないソケットのみを表示します。 |
|**Show Skeleton Sockets**	| カスタマイズされていないソケット、つまり、スケルトン アセットの一部でスケルタル メッシュ限定ではないソケットのみを表示します。 |
|**Show All Sockets**		|スケルタル メッシュ上で利用できる全てのソケットを表示します。 |
|**Hide Sockets**			| 全てのソケットを非表示にします。 |

### ブレンド プロファイル

ブレンド プロファイルは、ボーン毎のスケールのセットです。遷移やブレンド リストで使用されて特定のボーンのウェイトを微調整します。スケールは、ボーンに対する通常のウェイトに適用されます。 

ドロップダウン メニューからブレンド プロファイルを作成 / 名前付けして、ボーン毎のスケールを各ボーンの隣で指定します。 

![](BlendProfile.png)


## コンテキスト メニュー

**スケルトンツリー** 内を **右クリック** してアクセス可能なコンテキストメニューは、クリックする内容により、ボーン、ソケット、そしてアセットのプレビューに関するメニューなど、多数のメニューを表示します。

###ボーン コンンテキスト メニュー

ボーンを **右クリック** すると、以下のコンテキスト メニューが表示されます。

![](SkeletonContextMenu_Bone.png)

|**名前**|**説明**|
|---|---|
|[REGION:tablesection]ソケットのアクション[/REGION]||
| **Add Socket** | 選択中のボーンへ新規のソケットを追加します。**スケルトンツリー** の上部付近にあるボタンを使用してソケットを非表示にすると、オプションはグレイアウトで表示されます。 |
|**Paste Selected Socket** | ソケットをクリップボードにコピーしている場合 (**右クリック** して [Copy Selected Socket] を選択) 、選択中のボーンにそのソケットを貼り付けます。|
|[REGION:tablesection]選択中のボーン アクション[/REGION]||
| **Copy Selected Bone Names** | 選択したボーンの名前をクリップボードへコピーします。この機能は複雑なボーンの名前をプロパティ欄へ入力する際に便利です。 |
| [REGION:tablesection]ボーン移動の再ターゲット[/REGION]||
|**Recursively Set Translation Retargeting Skeleton**| ボーンとその子ボーンを全て再帰的に設定し、スケルトンに合わせて Translation Retargeting を使用します。[移動の再ターゲット制御](#移動の再ターゲット制御) をご覧ください。
|**Recursively Set Translation Retargeting Animation**| ボーンとその子ボーンを全て再帰的に設定し、アニメーションに合わせて Translation Retargeting を使用します。[移動の再ターゲット制御](#移動の再ターゲット制御) をご覧ください。
|**Recursively Set Translation Retargeting Animation**| ボーンとその子ボーンを全て再帰的に設定し、スケールされたアニメーションに合わせて Translation Retargeting を使用します。[移動の再ターゲット制御](#移動の再ターゲット制御) をご覧ください。
|**Recursively Set Translation Retargeting AnimationRelative**| ボーンとその子ボーンを全て再帰的に設定し、アニメーションに合わせて Translation Retargeting を使用します。[移動の再ターゲット制御](#移動の再ターゲット制御) をご覧ください。
| [REGION:tablesection]LOD ボーンの削減[/REGION]||
|**Remove Selected Bone from...**| 選択中のボーンとその子ボーンを LOD 設定の特定の LOD レベルに対する Bones to Remove リストに配置します。詳細は LOD 設定をご覧ください。|
|**Add Remove Selected Bone to...**| 選択中のボーンを、指定した LOD レベルに対する Bones to Remove リストから削除します。詳細は LOD 設定をご覧ください。|
| [REGION:tablesection]適用されたアセットのアクション[/REGION]||
|**Add Preview Asset**| プレビュー目的のボーンへの一時的な適用が可能な全てのアセットのメニューを開きます。例えば、ボーンに適用したアーマーの外観を知りたい場合に使用するオプションです。ただし、これは永久的な適用ではなく、ペルソナ内でのみの表示であることにご注意ください。 |

### ソケット コンテキスト メニュー

[ソケット](Engine/Content\Types\SkeletalMeshes\Sockets) を **右クリック** すると、以下のコンテキストメニューが表示されます。

![](SkeletonContextMenu_Socket.png)

|**名前**|**説明**|
|---|---|
| [REGION:tablesection]選択項目のアクション[/REGION]||
| **Delete** | 選択したソケットを削除します。  |
|[REGION:tablesection]選択中のソケットのアクション[/REGION]||
|**Copy Selected Sockets**| 選択中のソケットをクリップボードにコピーして他のボーンに貼り付けられるようにします。|
| **Rename Socket** | 選択したソケットの名前を変更することが出来ます。
|**Create Mesh Socket**|  Skeleton アセットから使用中の特定のスケルタル メッシュ上にソケットをコピーします。このようにソケットは同じスケルトン アセットを使用してキャラクターに関わりなく編集できますが、異なるメッシュ比率を持ちます。
|**Delete Mesh Socket** | メッシュ ソケット内に作成されたソケットを **右クリック** した時のみ利用することができます。Skeleton アセットのオリジナル ソケットのみを残して、ソケットのメッシュのコピーを取り除きます。|
| [REGION:tablesection]適用されたアセットのアクション[/REGION]||
|**Add Preview Asset**| プレビュー目的のボーンへの一時的な適用が可能な全てのアセットのメニューを開きます。例えば、ボーンに適用したアーマーの外観を知りたい場合に使用するオプションです。ただし、これは永久的な適用ではなく、ペルソナ内でのみの表示であることにご注意ください。 |
|**Remove All Attached Assets**| 適用されているすべての Preview アセットをこのソケットから取り除きます。|


### Preview Asset コンテキスト メニュー

**Preview アセット** はスタティック メッシュやスケルタル メッシュなど、プレビュー目的でボーンやソケットに一時的に適用されているアセットです。

Preview アセットを **右クリック** すると、以下のコンテキスト メニューが表示されます。


![](SkeletonContextMenu_PreviewAsset.png)

|**名前**|**説明**|
| --- | --- |
|[REGION:tablesection]選択中のアセットのアクション[/REGION]||
|**Delete**| 選択中の Preview アセットを削除します。|
| [REGION:tablesection]適用されたアセット アクション[/REGION]||
|**Add Preview Asset**| プレビュー目的のボーンへの一時的な適用が可能な全てのアセットのメニューを開きます。例えば、特定のアーマーをボーンにアタッチした状態を見てみたい時など、このオプションを使用してください。ただし、これは永久的な適用ではなく、ペルソナ内でのみの表示であることにご注意ください。 |
|**Remove All Preview Assets**| 現在メッシュ上にある全ての Preview アセットをすべて削除します。|



## ソケット

ソケットに関する詳細は、 [スケルタルメッシュのソケットのドキュメント](Engine/Content\Types\SkeletalMeshes\Sockets) を参照してください。


## 移動の再ターゲット制御

**スケルトンツリー** のボタンの右カラムで、スケルタルメッシュ上の移動のリターゲティングの操作を好きなようにコントロールすることができます。ドロップダウンで、スケルトンのボーン情報、アニメーション回転データ、スケールされたキャラクターに適用するアニメーションなど、何を再ターゲットの基礎として使用するのかを指定することができます。

それぞれのドロップダウンで、指定したそのボーンがどのように再ターゲットを扱うのか、再ターゲットのベースとして何を使うのかを制御できます。アニメーションの再ターゲットの詳細は [](Engine/Animation/AnimationRetargeting) に記載されています。

![](RetargetingControls.png)

各ボタンには以下の 3 つのオプションがあります。**右クリック**、コンテキストメニューで recursive コマンドを選択して、選択したボーンのそれぞれの子を再帰的に設定変更することも出来ます。

|名前|説明|
|---|---|
|**Animation**| アニメーションから移動を使用します。|
|**Skeleton**| スケルトンから移動を使用します。|
|**AnimationScaled**| アニメーション、スケルトンの比率によるスケール長から移動を使用します。 |
|**AnimationRelative**|加算アニメーションのようにアニメーションから相対的な移動を使用します。 |
